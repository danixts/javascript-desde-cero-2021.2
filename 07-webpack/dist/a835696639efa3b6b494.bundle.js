(()=>{"use strict";var t={};function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var r=t.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var n=r.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var r=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.template=document.getElementById(e).content,this.root=document.getElementById(r),this.fragment=document.createDocumentFragment()}var r,n;return r=t,(n=[{key:"render",value:function(){}},{key:"event",value:function(){}}])&&e(r.prototype,n),t}();const n=[{id:1,name:"Ciruelo",price:20,url:t.p+"assets/d925586585b31d6ff52467903dd4dfde.ciruelo.png"},{id:2,name:"Coco",price:10,url:t.p+"assets/a2bb9f814d790465cc22222cae4883ad.coco.png"},{id:3,name:"Frutilla",price:10,url:t.p+"assets/3f1952e466feb6b2c6aa5b135e5a5d68.frutilla.png"},{id:4,name:"Kiwi",price:2,url:t.p+"assets/959d460d80248a48a24cfb8c1fd15d09.kiwi.png"},{id:5,name:"Limon",price:6,url:t.p+"assets/18412e2fe2d09745813de4668251ab37.limon.png"},{id:6,name:"Mango",price:8,url:t.p+"assets/15cbc6766c7e32d20c25246764cf0aff.mango.png"},{id:7,name:"Melon",price:2,url:t.p+"assets/7cf1098e29355daa40a685732d37ec27.melon.png"},{id:8,name:"Pi√±a",price:67,url:t.p+"assets/2c92ab11577d6e674a185673181c7789.pina.png"},{id:9,name:"Platano",price:90,url:t.p+"assets/77db11af29dd677b9cf47e097ba8df86.platano.png"},{id:10,name:"Sandia",price:56,url:t.p+"assets/bddbdb124fecd47da08ac171e5fc6a91.sandia.png"},{id:11,name:"Uva",price:3,url:t.p+"assets/18619713c380e8dfc6480193300f02ea.uva.png"}];function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,"cart",{}),i(this,"KEY","carrito"),localStorage.getItem(this.KEY)&&(this.cart=JSON.parse(localStorage.getItem(this.KEY)))}var e,r,n;return e=t,n=[{key:"getInstance",value:function(){return this.instance||(this.instance=new t),this.instance}}],(r=[{key:"cartObject",get:function(){return Object.values(this.cart)}},{key:"add",value:function(t){var e=t.id;this.cart.hasOwnProperty(e)&&(t.qty=this.cart[e].qty+1),this.cart[e]=t}},{key:"increment",value:function(t){var e=this.cart[t];e.qty++,this.cart[t]=o({},e)}},{key:"decrement",value:function(t){var e=this.cart[t];e.qty--,0!==e.qty?this.cart[t]=o({},e):delete this.cart[t]}},{key:"clear",value:function(){this.cart={},localStorage.removeItem(this.KEY)}},{key:"setLocalStorage",value:function(){localStorage.setItem(this.KEY,JSON.stringify(this.cart))}},{key:"total",value:function(){return[this.cartObject.reduce((function(t,e){return t+e.qty}),0),this.cartObject.reduce((function(t,e){return t+e.qty*e.price}),0)]}}])&&c(e.prototype,r),n&&c(e,n),t}();i(u,"instance",void 0);const l=u.getInstance();function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function d(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y(t,e,r){return e&&d(t.prototype,e),r&&d(t,r),t}function h(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=g(t);if(e){var a=g(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v(this,r)}}function v(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var O=function(t){h(r,t);var e=b(r);function r(){var t;return p(this,r),(t=e.call(this,"template-product","app-product")).Cart=new w,t.event(),t}return y(r,[{key:"render",value:function(){var t=this;n.forEach((function(e){var r=e.id,n=e.url,a=e.name,o=e.price;t.template.querySelector("img").src=n,t.template.querySelector("span").textContent=a,t.template.querySelector("strong").textContent="".concat(o),t.template.querySelector("button").dataset.id=r;var c=t.template.cloneNode(!0);t.fragment.appendChild(c)})),this.root.appendChild(this.fragment)}},{key:"event",value:function(){var t=this;this.root.addEventListener("click",(function(e){e.target.classList.contains("btn-buy")&&(t.createElementCart(e.target.parentNode),t.Cart.render())}))}},{key:"createElementCart",value:function(t){var e={id:t.querySelector("button").dataset.id,price:+t.querySelector("strong").textContent,name:t.querySelector("span").textContent,qty:1};l.add(e)}}]),r}(r),w=function(t){h(r,t);var e=b(r);function r(){var t;return p(this,r),(t=e.call(this,"template-cart-list","app-cart-list")).clear=document.getElementById("btn-clear"),t.Total=new S,t.event(),t.render(),t}return y(r,[{key:"render",value:function(){var t=this;this.root.innerHTML="",console.log(l.cartObject),l.cartObject.forEach((function(e){var r=e.id,n=e.price,a=e.name,o=e.qty;t.template.querySelector(".text-id").textContent=r,t.template.querySelector(".text-name").textContent=a,t.template.querySelector(".btn-minus").dataset.id=r,t.template.querySelector(".text-qty").textContent=o,t.template.querySelector(".btn-plus").dataset.id=r,t.template.querySelector(".text-total").textContent=o*n;var c=t.template.cloneNode(!0);t.fragment.appendChild(c)})),this.root.appendChild(this.fragment),this.Total.render(),l.setLocalStorage()}},{key:"event",value:function(){var t=this;this.clear.addEventListener("click",(function(){l.clear(),t.render()})),this.root.addEventListener("click",(function(e){if(e.target.classList.contains("btn-minus")){var r=e.target.dataset.id;l.decrement(r),t.render()}if(e.target.classList.contains("btn-plus")){var n=e.target.dataset.id;l.increment(n),t.render()}}))}}]),r}(r),S=function(t){h(r,t);var e=b(r);function r(){var t;return p(this,r),(t=e.call(this,"template-cart-total","app-cart-total")).render(),t}return y(r,[{key:"render",value:function(){this.root.innerHTML="";var t,e,r=(t=l.total(),e=2,function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,a,o=[],c=!0,i=!1;try{for(r=r.call(t);!(c=(n=r.next()).done)&&(o.push(n.value),!e||o.length!==e);c=!0);}catch(t){i=!0,a=t}finally{try{c||null==r.return||r.return()}finally{if(i)throw a}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),n=r[0],a=r[1];this.template.querySelector(".text-qty").textContent=n,this.template.querySelector(".text-total").textContent=a;var o=this.template.cloneNode(!0);this.fragment.appendChild(o),this.root.appendChild(this.fragment)}}]),r}(r);document.addEventListener("DOMContentLoaded",(function(){(new O).render()}))})();